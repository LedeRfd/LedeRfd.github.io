<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>TASK</title>
  <!--[if IE]>
   <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <style>
   article, aside, details, figcaption, figure, footer,header,
   hgroup, menu, nav, section { display: block; }
  </style>
  <link rel="stylesheet" href="css/javascript.fullPage.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/animation.css">
  <link rel="stylesheet" href="css/dragdealer.css">

  <script src="js/rellax.min.js"></script>
  <script src="js/dragdealer.js"></script>

 </head>
 <body>
  <div id="wrapper">
    <div class="section" id="section0">
      <div class="content">
        <h1 class="first_slide_title">Всегда ли цели терапии СД2 на<br /> поверхности?</h1>
        <div class="first_block">
          <div class="pulse1"></div>
          <div class="pulse2"></div>
          <div class="icon"></div>
        </div>
        <div class="second_block">
          <div class="pulse1"></div>
          <div class="pulse2"></div>
          <div class="icon"></div>
        </div>
        <div class="third_block">
          <div class="pulse1"></div>
          <div class="pulse2"></div>
          <div class="icon"></div>
        </div>
        <div class="fourth_block">
          <div class="pulse1"></div>
          <div class="pulse2"></div>
          <div class="icon"></div>
        </div>
      </div>
      <div class="next_slide_arrow">
        <a href=#secondPage id="arrow_text">Листайте вниз</a>
      </div>
    </div>


    <div class="section" id="section1">
      <div class="centred_content rellax" data-rellax-speed="3">
        <h1>Основа терапии — патогенез СД2</h1>
      </div>
      <div class="rellax" data-rellax-speed="3" id="cube-0">
        <img src="img/Secondpage/cube.png" />
      </div>
      <div class="rellax" data-rellax-speed="1" id="cube-1">
        <img src="img/Secondpage/cube-1.png" />
      </div>
      <div class="rellax" data-rellax-speed="1" id="cube-2">
        <img src="img/Secondpage/cube-2.png" />
      </div>
      <div class="rellax" data-rellax-speed="1" id="cube-3">
        <img src="img/Secondpage/cube-3.png" />
      </div>

      <div class="next_slide_arrow">
        <a href=#3rdPage id="arrow_text">Листайте вниз</a>
      </div>

    </div>


    <div class="section" id="section2">

      <div class="slide fp-slide" id="slide1">
        <h1 class="third_slide_h1">Звенья патогенеза СД2</h1>
        <h2 class="numbers-1">1</h2>
        <h2 class="numbers-2">β-клетки</h2>
        <h2 class="numbers-3">2</h2>
        <h2 class="numbers-4">3</h2>
        <div class="content">
          <img src="img/Thirdpage/tab_1.png">
        </div>
        <div>
          <img class="icecube-1" src="img/Thirdpage/slide_1/ice_1_slide_1.png" alt="">
        </div>
        <div>
          <img class="icecube-2" src="img/Thirdpage/slide_1/ice_2_slide_1.png" alt="">
        </div>
        <div>
          <img class="icecube-3" src="img/Thirdpage/slide_1/ice_3_slide_1.png" alt="">
        </div>
      </div>
      <div class="slide fp-slide" id="slide2">
        <h1 class="third_slide_h1">Смертельный октет</h1>
        <div class="content">
          <img src="img/Thirdpage/tab_2.png">
        </div>
        <div>
          <img class="icecube-4" src="img/Thirdpage/slide_2/ice_4_slide_2.png" alt="">
        </div>
        <div>
          <img class="icecube-5" src="img/Thirdpage/slide_2/ice_5_slide_2.png" alt="">
        </div>
        <div>
          <img class="icecube-6" src="img/Thirdpage/slide_2/ice_6_slide_2.png" alt="">
        </div>
      </div>
      <div class="slide fp-slide" id="slide3">
        <h1 class="third_slide_h1">Звенья патогенеза СД2</h1>
        <div class="content">
          <img src="img/Thirdpage/tab_3.png">
        </div>
        <div>
          <img class="icecube-7" src="img/Thirdpage/slide_3/ice_7_slide_3.png" alt="">
        </div>
        <div>
          <img class="icecube-8" src="img/Thirdpage/slide_3/ice_8_slide_3.png" alt="">
        </div>
        <div>
          <img class="icecube-9" src="img/Thirdpage/slide_3/ice_9_slide_3.png" alt="">
        </div>
      </div>

    </div>
  </div>

  <div id="just-a-slider" class="dragdealer disabled">
      <div class="handle">
      </div>
      <span>1988</span>
      <span>2009</span>
      <span>2016</span>
  </div>
  <div class="links">
    <a class="active" href=#firstPage></a>
    <a href=#secondPage></a>
    <a href=#3rdPage></a>
  </div>

 </body>
 <script src="js/javascript.fullPage.min.js"></script>

 <script>
  var rellax = new Rellax('.rellax');
</script>

 <script>
   fullpage.initialize('#wrapper', {
     anchors: ['firstPage', 'secondPage', '3rdPage', '4thpage', 'lastPage'],
     menu: '#menu',
     onSlideLeave: function(anchorLink, index, slideIndex, direction, nextSlideIndex){
       if(nextSlideIndex == 0){
         createDragSlider(0);
       };
       if(nextSlideIndex == 1){
         createDragSlider(0.5);
       };
       if(nextSlideIndex == 2){
         createDragSlider(1);
       };
     },
     onLeave: function(index,nextIndex){
       var links = document.getElementsByClassName('links')[0].getElementsByTagName('a'),
           anchors = ['firstPage', 'secondPage', '3rdPage'];
       for(var n = 0; n < links.length;n++){
         links[n].classList.remove('active');
       }
       for(var i = 0;i < links.length; i++){
         if(nextIndex - 1 == i)links[i].classList.add('active');
       };
       if(nextIndex !== 3 ){
         unCheckSlideBar();
       };
       if(nextIndex === 3){
         checkSlideBar();
       };
     },
     afterRender: function(){
       unCheckSlideBar();
     },
     css3:true,
     scrollOverflow: true,
     scrollBar: true
   });

   function checkSlideBar(){
     var slider = document.getElementById('just-a-slider');
     setTimeout(function() {
       slider.style.display = 'block';
       createDragSlider(1);
     }, 500);
   };

   function unCheckSlideBar(){
     var slider = document.getElementById('just-a-slider');
     slider.style.display = 'none';
   };

   function createDragSlider(initialPosition){
     new Dragdealer('just-a-slider', {
       x : initialPosition,
       animationCallback: function(x, y) {
           if(x * 100 > 90){
             location.href = '#3rdPage/2';
           }
           else if(x * 100 < 60 && x * 100 > 47){
             location.href = '#3rdPage/1';
           }
           else if (x * 100 < 23){
             location.href = '#3rdPage';
           };
       }
     });
   }
 </script>
</html>